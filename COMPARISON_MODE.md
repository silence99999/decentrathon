# –†–µ–∂–∏–º —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –º–æ–¥–µ–ª–µ–π - Roboflow + Offline

## üîÑ **–ù–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥**

–°–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä—å –∑–∞–ø—É—Å–∫–∞–µ—Ç **–æ–±–∞ –º–µ—Ç–æ–¥–∞ –∞–Ω–∞–ª–∏–∑–∞ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ** –∏ —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:

1. **ü§ñ Roboflow API** (4 —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏)
2. **üî¨ Offline Analyzer** (–∫–æ–º–ø—å—é—Ç–µ—Ä–Ω–æ–µ –∑—Ä–µ–Ω–∏–µ OpenCV)

## ‚ö° **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ**

```go
// –ó–∞–ø—É—Å–∫–∞–µ–º –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –≤ goroutines
go func() { roboflowResponse = callRoboflowModel(filepath) }()
go func() { offlineResponse = callOfflineModel(filepath) }()
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ë—ã—Å—Ç—Ä–µ–µ —á–µ–º –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
- –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å - –µ—Å–ª–∏ –æ–¥–∏–Ω –º–µ—Ç–æ–¥ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –µ—Å—Ç—å –≤—Ç–æ—Ä–æ–π
- –ù–∞—É—á–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

## üìä **–ß—Ç–æ –ø–æ–ª—É—á–∞–µ—à—å –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ**

### **1. –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã**
```json
{
  "model_comparison": {
    "roboflow": {
      "rust": true,
      "scratches": false,
      "method": "roboflow",
      "damage_details": [...]
    },
    "offline": {
      "rust": false,
      "scratches": true,
      "method": "offline",
      "damage_details": [...]
    }
  }
}
```

### **2. –ê–Ω–∞–ª–∏–∑ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏**
```json
{
  "agreement": {
    "rust": false,      // –ú–µ—Ç–æ–¥—ã –Ω–µ —Å–æ–≥–ª–∞—Å–Ω—ã
    "scratches": false, // –ú–µ—Ç–æ–¥—ã –Ω–µ —Å–æ–≥–ª–∞—Å–Ω—ã
    "dirt": true,       // –ú–µ—Ç–æ–¥—ã —Å–æ–≥–ª–∞—Å–Ω—ã
    "cracks": true,     // –ú–µ—Ç–æ–¥—ã —Å–æ–≥–ª–∞—Å–Ω—ã
    "dents": true       // –ú–µ—Ç–æ–¥—ã —Å–æ–≥–ª–∞—Å–Ω—ã
  },
  "conflicts": [
    "rust: Roboflow=true, Offline=false",
    "scratches: Roboflow=false, Offline=true"
  ]
}
```

### **3. –û–±—ä–µ–¥–∏–Ω–µ–Ω–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**
```json
{
  "combined": {
    "rust": true,        // –ï—Å–ª–∏ –õ–Æ–ë–û–ô –º–µ—Ç–æ–¥ –æ–±–Ω–∞—Ä—É–∂–∏–ª - –≤–∫–ª—é—á–∞–µ–º
    "scratches": true,   // –û–±—ä–µ–¥–∏–Ω—è–µ–º –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è
    "cleanliness": 0.75, // –í–∑–≤–µ—à–µ–Ω–Ω–æ–µ —Å—Ä–µ–¥–Ω–µ–µ (70% Roboflow + 30% Offline)
    "method": "combined (agreement: 3/5)",
    "damage_details": [...], // –û–±—ä–µ–¥–∏–Ω—è–µ–º –≤—Å–µ –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –¥–µ—Ñ–µ–∫—Ç—ã
    "description": "Issues found by combined analysis: [rust, scratches]"
  }
}
```

## üéØ **–õ–æ–≥–∏–∫–∞ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è**

### **–í–µ—Å–∞ –º–µ—Ç–æ–¥–æ–≤:**
- **Roboflow**: 70% (–æ–±—É—á–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏)
- **Offline**: 30% (—ç–≤—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã)

### **–ï—Å–ª–∏ –º–µ—Ç–æ–¥—ã —Å–∏–ª—å–Ω–æ —Å–æ–≥–ª–∞—Å–Ω—ã (4+/5):**
- **Roboflow**: 60%
- **Offline**: 40% (–±–æ–ª—å—à–µ –¥–æ–≤–µ—Ä–∏—è offline –º–µ—Ç–æ–¥—É)

### **–°—Ç—Ä–∞—Ç–µ–≥–∏—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è:**
- **OR –ª–æ–≥–∏–∫–∞**: –ï—Å–ª–∏ –õ–Æ–ë–û–ô –º–µ—Ç–æ–¥ –Ω–∞—à–µ–ª –¥–µ—Ñ–µ–∫—Ç ‚Üí –≤–∫–ª—é—á–∞–µ–º
- **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å**: –ë–µ—Ä–µ–º –Ω–∞–∏–±–æ–ª—å—à—É—é confidence
- **–ö–æ–º–±–∏–Ω–∞—Ü–∏—è –¥–µ—Ç–∞–ª–µ–π**: –û–±—ä–µ–¥–∏–Ω—è–µ–º –≤—Å–µ –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –æ–±–ª–∞—Å—Ç–∏

## üîÑ **–°—Ü–µ–Ω–∞—Ä–∏–∏ —Ä–∞–±–æ—Ç—ã**

### **‚úÖ –û–±–∞ —Ä–∞–±–æ—Ç–∞—é—Ç:**
- –ü–æ–ª—É—á–∞–µ–º –ø–æ–ª–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ
- –í–∑–≤–µ—à–µ–Ω–Ω–æ–µ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- –ê–Ω–∞–ª–∏–∑ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏

### **‚ö†Ô∏è –¢–æ–ª—å–∫–æ Roboflow —Ä–∞–±–æ—Ç–∞–µ—Ç:**
```json
{
  "method": "roboflow (offline failed)",
  "description": "Analysis based on Roboflow models only"
}
```

### **‚ö†Ô∏è –¢–æ–ª—å–∫–æ Offline —Ä–∞–±–æ—Ç–∞–µ—Ç:**
```json
{
  "method": "offline (roboflow failed)",
  "description": "Analysis based on computer vision only"
}
```

### **‚ùå –û–±–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç:**
```json
{
  "error": "Both analysis methods failed",
  "roboflow_error": "...",
  "offline_error": "..."
}
```

## üé® **–ü—Ä–∏–º–µ—Ä –ø–æ–ª–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞**

```json
{
  "id": "analysis-123",
  "has_rust": true,
  "has_scratches": true,
  "overall_status": "Needs Attention",
  "details": "Issues found by combined analysis: [rust, scratches]",

  "model_comparison": {
    "roboflow": {
      "rust": true,
      "scratches": false,
      "confidence_scores": {"rust": 0.85},
      "damage_details": [
        {
          "type": "rust",
          "x": 245, "y": 167,
          "confidence": 0.85,
          "detected_by": "Rust Detection (SPECIALIZED for rust only)"
        }
      ]
    },
    "offline": {
      "rust": false,
      "scratches": true,
      "confidence_scores": {"scratches": 0.6},
      "damage_details": [
        {
          "type": "scratch",
          "x": 300, "y": 200,
          "confidence": 0.6,
          "detected_by": "OpenCV Edge Detection"
        }
      ]
    },
    "agreement": {
      "rust": false,
      "scratches": false,
      "dirt": true,
      "cracks": true,
      "dents": true
    },
    "conflicts": [
      "rust: Roboflow=true, Offline=false",
      "scratches: Roboflow=false, Offline=true"
    ],
    "combined": {
      "rust": true,
      "scratches": true,
      "method": "combined (agreement: 3/5)",
      "damage_details": [
        // –í—Å–µ –¥–µ—Ñ–µ–∫—Ç—ã –æ—Ç –æ–±–æ–∏—Ö –º–µ—Ç–æ–¥–æ–≤
      ]
    }
  }
}
```

## üöÄ **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**

1. **üéØ –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å** - –¥–≤–∞ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö –º–µ—Ç–æ–¥–∞
2. **üîç –ù–∞—É—á–Ω—ã–π –ø–æ–¥—Ö–æ–¥** - –≤–∏–¥–∏—à—å –≥–¥–µ –º–µ—Ç–æ–¥—ã —Å–æ–≥–ª–∞—Å–Ω—ã/—Ä–∞—Å—Ö–æ–¥—è—Ç—Å—è
3. **üõ°Ô∏è –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å** - –µ—Å–ª–∏ –æ–¥–∏–Ω –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –µ—Å—Ç—å –≤—Ç–æ—Ä–æ–π
4. **üìà –ë–æ–ª—å—à–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏** - –¥–µ—Ç–∞–ª–∏ –æ—Ç –∫–∞–∂–¥–æ–≥–æ –º–µ—Ç–æ–¥–∞
5. **‚ö° –ë—ã—Å—Ç—Ä–æ—Ç–∞** - –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ

**–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞: http://localhost:8081** üéâ